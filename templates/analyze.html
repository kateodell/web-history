{% extends "base.html" %}

{% block head %}
    <link type="text/css" rel="stylesheet" href="/static/css/rickshaw/graph.css">
    <link type="text/css" rel="stylesheet" href="/static/css/rickshaw/detail.css">
    <link type="text/css" rel="stylesheet" href="/static/css/rickshaw/legend.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script src="/static/js/d3.v2.js"></script>

    <script src="/static/js/rickshaw.js"></script>
    <script src="/static/js/render_graph.js"></script>

{% endblock %}

{% block content %}
<div class="container-fluid">
<div class="row-fluid">
    <h3>Things that were analyzed...</h3>

    <div class="span3">
        <div class="well sidebar-nav">
            <ul class="nav nav-list">
                {% set selected = queries[0] %}
                {% for q in queries %}
                    <li{% if q == selected %} class="active"{% endif %}>
                        <a class="refresh" id="{{q.name}}" href="/analyze/{{q.name}}">{{ q.long_name }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% for query in queries %}
        <div class="span8">
            {% include "render_graph.html" %}
            <script>
                var api_parameters = "query={{ query.name }}";
                var queryGraph = render_graph("{{ query.name }}", "{{ query.long_name }}", api_parameters, true)
            </script>
        </div>
    {% endfor %}
</div>
</div>

{% endblock %}