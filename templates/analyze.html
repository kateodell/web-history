{% extends "base.html" %}

{% block head %}
    <link type="text/css" rel="stylesheet" href="/static/css/rickshaw/graph.css">
    <link type="text/css" rel="stylesheet" href="/static/css/rickshaw/detail.css">
    <link type="text/css" rel="stylesheet" href="/static/css/rickshaw/legend.css">
    <link type="text/css" rel="stylesheet" href="/static/css/bootstrap-combobox.css">


{% endblock %}

{% block content %}
<div class="container-fluid">
<div class="row-fluid">
    <h1>Things that were analyzed...</h1>
    {% set selected = queries[0] %}
    <form>
        <fieldset>
            <select class="combobox input-large">
              <option value="">Choose a tag</option>
              {% for q in queries %}
                <option value="{{q.name}}" {% if q == selected %}class="active"{% endif %}>{{q.tag_name}}</option>
              {% endfor %}
            </select>
        </fieldset>
    </form>


    <!-- Selector Column on left side -->
<!--     <div class="span3">
        <div class="well sidebar-nav">
            <ul class="nav nav-pills nav-stacked">
                {% set selected = queries[0] %}
                {% for q in queries %}
                    <li class="graph_selector{% if q == selected %} active{% endif %}" id="{{q.name}}">
                        <a  href="#{{q.name}}">{{ q.long_name }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div> -->

    <!-- Graph Panel on right side -->
    <div class="span8">
    <ul class="nav nav-tabs">
        <li class="active"><a href="#">Home</a></li>
    </ul>
    {% for query in queries %}
            {% include "render_graph.html" %}
            <script>
                var api_parameters = "query={{ query.name }}";
                var queryGraph = render_graph("{{ query.name }}", "{{ query.name }}", api_parameters, true)
                if("{{query.name}}" !== "{{selected.name}}"){
                    $("div#chart_container_{{query.name}}").hide();
                }
            </script>
    {% endfor %}

    </div>
    <script type="text/javascript">
        // Show selected div, hide the others
        $(".graph_selector").click(function () {
            $(".history_chart").hide();
            $(".active").removeClass("active");
            $(this).addClass("active");
            $("#chart_container_" + $(this).attr("id")).show();
        });
    </script>
    <script type="text/javascript">
  $(document).ready(function(){
    $('.combobox').combobox();
  });
</script>
</div>
</div>

{% endblock %}